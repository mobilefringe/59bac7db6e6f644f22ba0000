<style>
   .map_container {
       height: 90%;
        width: 90%;
        margin:auto;
   }
    #map {
        /*position: absolute;*/
        height: 100%;
        width: 100%;
        margin:auto;
        background-color: #fffff0;
        overflow:hidden;
    }
</style>
     <!--Base libraries-->
    <link href='https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.5/leaflet.css' rel='stylesheet' type='text/css'/>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.5/leaflet-src.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.4.9/d3.min.js"></script>
     <script src="http://assets.codecloudapp.com/sites/59bac7db6e6f644f22ba0000/text/javascript/1505852644000/L.SvgScaleOverlay.js"></script>
      <script src="http://assets.codecloudapp.com/sites/59bac7db6e6f644f22ba0000/text/javascript/1505852644000/L.SvgScaleOverlay.js"></script>
    <!--<script src="../svgoverlay_sk.js"></script>-->
    <div class="map_container">
        <div id="map">
          
        </div>
    </div>
    
    <div id="tooltip" style="width:500px; height:250px;">
     </div>


<script>
    $(document).ready(function(e){
        init(e);
        var map = L.map('map', {
            crs: L.CRS.Simple,
            // zoom:1,
            minZoom : 1,
            maxZooom: 5
        });
        var bounds =[[-226.953125,154],[938.046875,-199]]//[[89,219], [843,730]];// [[0,0], [500,500]];
        var image = L.imageOverlay('//mallmaverick.cdn.speedyrails.net/system/properties/svgmaps/000/000/028/original/Londonderry_DB_4.svg?1497642416', bounds).addTo(map);
        map.fitBounds(bounds);
        var yx = L.latLng;
        var xy = function(x, y) {
            if (L.Util.isArray(x)) {    // When doing xy([x, y]);
                return yx(x[1], x[0]);
            }
            return yx(y, x);  // When doing xy(x, y);
        };
        var smallIcon = new L.Icon({
            iconUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-icon.png',
            iconRetinaUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-icon-2x.png',
            iconSize:    [25, 41],
            iconAnchor:  [12, 41],
            popupAnchor: [1, -34],
            shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png',
            shadowSize:  [0,0]
        });
         var smallerIcon = new L.Icon({
            iconUrl: 'http://assets.codecloudapp.com/sites/59bac7db6e6f644f22ba0000/image/png/1496327260000/823841_message_512x512.png',
            iconRetinaUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-icon-2x.png',
            iconSize:    [25, 41],
            iconAnchor:  [12, 41],
            popupAnchor: [1, -34],
            shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png',
            shadowSize:  [0,0]
        });
        var stores = getStoresList();
        // console.log(stores);
        
        var sol      =xy( 13.4,  56.5);
        var mizar    = xy( 41.6, 130.1);
        var store    = xy( stores[0].x_coordinate,stores[0].y_coordinate);
        // var kruegerZ = xy( 13.4,  56.5);
        // var deneb    = xy(218.7,   8.3);
        
        L.marker(sol, {icon:smallIcon}).addTo(map).bindPopup('Sol');
        L.marker(mizar,{icon:smallIcon}).addTo(map).bindPopup('Mizar');
        L.marker(store,{icon:smallerIcon}).addTo(map).bindPopup('Store');
        
       map.on('click', function(e) {       
           console.log("hey", e);
            var popLocation= e.latlng;
            var popup = L.popup()
            .setLatLng(popLocation)
            .setContent('<p>Hello world!<br />This is a nice popup.</p>')
            .openOn(map);        
        });
        
        $('.custom_backdrop').remove();
        $('.yield').fadeIn();
 
    });
</script>