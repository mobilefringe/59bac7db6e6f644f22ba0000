<style type="text/css">
    html { height: 100% }
    body { height: 100%; margin: 0; padding: 0 }
     #map-container {
        width:900px;
        height:500px;
        margin: auto;
    }
    #map-canvas{
        height:100%;
        width:100%;
    }
    svg:not(:root) {
        overflow: visible;
    }
</style>
<div id="map-container">
   <div id="map-canvas"></div> 
</div>
   
<link href='https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.5/leaflet.css' rel='stylesheet' type='text/css'/>
<script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.5/leaflet-src.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.4.9/d3.min.js"></script>
<script src="../l.d3svgoverlay.js"></script>
<script>
    var map = L.map("map-canvas", {crs: L.CRS.Simple,center: [0, 0], zoom: 3, maxZoom:6, minZoom:1});
        var countries = [];
        var countriesOverlay = L.d3SvgOverlay(function(sel, proj) {
        });
        var d3layer_this;
        var  svgUrl = "//mallmaverick.cdn.speedyrails.net/system/properties/svgmaps/000/000/028/original/Londonderry_DB_4.svg?1497642416"
        
        d3.xml(svgUrl).mimeType("image/svg+xml").get(function(error, svgImg) {
            if (error) throw error;
            map.getPanes().overlayPane.appendChild(svgImg.documentElement);
            d3layer_this =  countriesOverlay.addTo(map);
            console.log(d3layer_this);
        });
    $(document).ready(function(e){
        init(e);
        loadMallDataCached(renderPage);
    })
    function renderPage(){
        // var stores = getStoresList();
        // var store_svgregion = stores[0].svgmap_region;
        // console.log($("#"+store_svgregion));
        
        
        $('.custom_backdrop').remove();
        $('.yield').fadeIn();
    }
    $(window).load(function(){
        setTimeout(function(){
            console.log("delay is done!");
           map.setZoom(1);
           var stores = getStoresList();
            var store_svgregion = stores[0].svgmap_region;
            console.log($("#"+store_svgregion)[0].getBBox());
            var coords = $("#"+store_svgregion)[0].getBBox();
            var height = parseInt(coords["height"])
            var width = parseInt(coords["width"])
        }, 500);
        
    });
    
    //marker dev
    // get_coords: function (v) {
    //     var coords = _data.R.getById(v).getBBox();
    //     return coords;
    // }
</script>