<style>
        /*body {*/
        /*    margin: 0px;*/
        /*}*/
        /*#map {*/
        /*    position: relative;*/
        /*    height: 100%;*/
        /*    width: 100%;*/
        /*    background-color: #333;*/
        /*}*/
         html, body, #map { width:90%; height:400px; margin:auto; padding:0; }
    /*svg {*/
    /*    width:900px;*/
    /*    height:400px;*/
    /*}*/
    #map {
        width:900px;
        height:400px;
    }
    /*svg{*/
    /*    width:100%;*/
    /*    height:100%;*/
    /*}*/
    </style>
<div id="map">
    </div>
    <div id="tooltip" style="width:230px; height:100px;">
     </div>

<link href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.3/leaflet.css" rel="stylesheet">
<script src="https://d3js.org/d3.v4.min.js"></script>
<script src="http://www.sumbera.com/gist/js/leaflet/svg/scaled/leaflet.js"></script>
<script src="../l.svgscaleoverlay.js" type="text/javascript"></script>
 <script src="http://www.sumbera.com/gist/data.js" charset="utf-8"></script>
    
     <script>
        
      
            var lmap = new L.Map("map", {
                crs: L.CRS.Simple,
                zoom:-10,
                min_zoom:0,
                max_zoom:15,
                center:[50,50]
            });
            // new  L.map('map').setView([50.00, 14.44], 9)
            //             .addLayer(L.tileLayer("http://{s}.sm.mapstack.stamen.com/(toner-lite,$fff[difference],$fff[@23],$fff[hsl-saturation@20])/{z}/{x}/{y}.png"));

            var circles;

            var svgOverlay = L.SvgScaleOverlay({svg_url:"//mallmaverick.cdn.speedyrails.net/system/properties/svgmaps/000/000/028/original/Londonderry_DB_4.svg?1497642416"});
            var radius = 3;
    
            console.log("this is one");
            svgUrl = "//mallmaverick.cdn.speedyrails.net/system/properties/svgmaps/000/000/028/original/Londonderry_DB_4.svg?1497642416"
            //------------------------------------------------------------
            // svgOverlay.onInitData = function (svgUrl) {
               
            //     console.log("in onInitData 2");
            // };
            console.log("this is second");
            
        this._svg 
        console.log("hi");
        d3.xml(svg_url).mimeType("image/svg+xml").get(function(error, svgImg) {
            if (error) throw error;
              svgImg_doc = svgImg.documentElement;
            //   console.log(svgImg.documentElement);
            //   console.log(svgImg);
            
            //  document.appendChild(svgImg.documentElement);
            // this._map =  this.svgOverlay._map;
            lmap.getPanes().overlayPane.appendChild(svgImg.documentElement);
            //   this._svg.addClass('leaflet-zoom-hide');
            overlayClass=lmap.getPanes().overlayPane.className.replace(/ /g, '.');
            // overlayClass
              this.svgOverlay._svg =  $('.'+ overlayClass +' svg')[0];
            //   this.svgOverlay._g = [];
              temp_g = []
              console.log(this);
              $('.'+ overlayClass +' svg').children().each (function (key,val){
                  console.log(val);
                //   this.svgOverlay._g.push(val);
                temp_g.push(val);
              });
            //   this.svgOverlay._g =  $('.'+ overlayClass +' svg #signs')[0];
              this.svgOverlay._g = temp_g;
               console.log(this.lmap);
           
            lmap.addLayer(svgOverlay);
        });
        $('.custom_backdrop').remove();
        $('.yield').fadeIn();
            
            

    </script>